checkout:
  pre:
    - curl -L https://raw.githubusercontent.com/snmsts/roswell/master/scripts/install-for-ci.sh | sh

dependencies:
  pre:
    - case $CIRCLE_NODE_INDEX in 0) ros install sbcl/1.2.12; ros use sbcl/1.2.12 ;; 1) ros install ccl-bin/1.10; ros use ccl-bin/1.10 ;; esac
    - git clone https://github.com/fukamachi/cl-coveralls ~/lisp/cl-coveralls
  cache_directories:
    - "$HOME/.roswell"
    
test:
  override:
    - ros -s prove -s cl-coveralls
          -e '(or (coveralls:with-coveralls (:exclude (list "t"))
                    (prove:run :elb-log-test))
                  (uiop:quit -1))'
